{{ if eq .chezmoi.os "linux" -}}
#!/bin/bash
set -euo pipefail

{{ range .packages.linux.packages -}}
if ! pacman -Qi {{ . | quote }} &>/dev/null ; then
  echo "Installing package {{ . | quote }}"

  paru -S --noconfirm {{ . | quote }}
fi
{{ end -}}
{{ range .packages.linux.flatpaks -}}
if ! flatpak info {{ . | quote }} &>/dev/null ; then
  echo "Installing flatpak {{ . | quote }}"

  flatpak install -y flathub {{ . | quote }}
fi
{{ end -}}
{{ end -}}